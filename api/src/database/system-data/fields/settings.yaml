# For the next poor soul who needs to figure this structure out
# ---
# The fields directly in the fields array are compiled to the following structure.
# ---
# Note - this is not the structure in which the fields should be written here.
# Rather, this is the structure expected by the v-form component on the frontend.
# ---
# Directus will automatically parse the first-level fields and return it in this
# structure. For instance, it'll place the interface, options, width, etc. in the meta
# property. Of course, it'll also automatically fill the schema from the respective
# database columns, amongst setting other defaults.
# ---
# You may notice I've stressed that the automatic parsing only applies to the immediate
# fields. This is because some fields, such as `storage_asset_presets` or
# `theme_overrides`, opt to add an array of sub-fields in the `options` property.
# Directus will return these options as-is, as part of the field. Thus, any sub-fields
# defined in such a manner should be written in the structure below.

# - collection: string;
#   field: string;
#   type: Type;
#   schema: Column | null;
#   meta: FieldMeta | null;
#     id: number;
#     collection: string;
#     field: string;
#     group: string | null;
#     hidden: boolean;
#     interface: string | null;
#     display: string | null;
#     options: Record<string, any> | null;
#     display_options: Record<string, any> | null;
#     readonly: boolean;
#     required: boolean;
#     sort: number | null;
#     special: string[] | null;
#     translations: Translations[] | null;
#     width: Width | null;
#     note: string | null;
#     conditions: Condition[] | null;
#     validation: Filter | null;
#     validation_message: string | null;
#
# For more detailed typing information refer to /shared/src/types/fields.ts
#

table: directus_settings

fields:
  - field: id
    hidden: true

  - field: project_name
    interface: input
    options:
      iconRight: title
      placeholder: $t:field_options.directus_settings.project_name_placeholder
    translations:
      language: en-US
      translations: Name
    width: half

  - field: project_descriptor
    interface: input
    options:
      iconRight: title
      placeholder: $t:field_options.directus_settings.project_name_placeholder
    translations:
      language: en-US
      translations: Name
    width: half

  - field: project_url
    interface: input
    options:
      iconRight: link
      placeholder: https://example.com
    translations:
      language: en-US
      translations: Website
    width: half

  - field: default_language
    interface: system-language
    options:
      iconRight: language
      placeholder: en-US
    translations:
      language: en-US
      translations: Default Language
    width: half

  - field: branding_divider
    interface: presentation-divider
    options:
      icon: palette
      title: $t:fields.directus_settings.branding
    special:
      - alias
      - no-data
    width: full

  - field: project_color
    interface: select-color
    note: $t:field_options.directus_settings.project_color_note
    translations:
      language: en-US
      translations: Brand Color
    width: half

  - field: project_logo
    interface: file
    note: $t:field_options.directus_settings.project_logo_note
    translations:
      language: en-US
      translations: Brand Logo
    width: half

  - field: public_foreground
    interface: file
    translations:
      language: en-US
      translations: Login Foreground
    width: half

  - field: public_background
    interface: file
    translations:
      language: en-US
      translations: Login Background
    width: half

  - field: public_note
    interface: input
    options:
      placeholder: $t:field_options.directus_settings.public_note_placeholder
      iconRight: info
    width: full

  - field: custom_css
    interface: input-code
    options:
      language: css
      lineNumber: true
      template: |
        #app, #main-content, body {
          --g-color-primary-normal: #6644FF !important;
          --g-color-primary-accent: #4422DD !important;
          --g-color-primary-subtle: #DDDDFF !important;

          --v-button-background-color: #6644FF !important;
          --v-button-background-color-hover: #5E41EC !important;
          --sidebar-detail-color-active: #5E41EC !important;
        }
    width: full

  - field: modules_divider
    interface: presentation-divider
    options:
      icon: menu_open
      title: $t:modules
    special:
      - alias
      - no-data
    width: full

  - field: module_bar
    interface: system-modules
    special: cast-json

  - field: security_divider
    interface: presentation-divider
    options:
      icon: shield
      title: $t:security
    special:
      - alias
      - no-data
    width: full

  - field: auth_password_policy
    interface: select-dropdown
    options:
      choices:
        - value: null
          text: $t:field_options.directus_settings.auth_password_policy.none_text
        - value: '/^.{8,}$/'
          text: $t:field_options.directus_settings.auth_password_policy.weak_text
        - value: "/(?=^.{8,}$)(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$%^&*()_+}{';'?>.<,])(?!.*\\s).*$/"
          text: $t:field_options.directus_settings.auth_password_policy.strong_text
      allowOther: true
    width: half

  - field: auth_login_attempts
    interface: input
    options:
      iconRight: lock
      placeholder: $t:unlimited
    width: half

  - field: files_divider
    interface: presentation-divider
    options:
      icon: folder
      title: $t:fields.directus_settings.files_and_thumbnails
    special:
      - alias
      - no-data
    width: full

  - field: storage_asset_transform
    interface: select-dropdown
    options:
      choices:
        - value: all
          text: $t:fields.directus_settings.transformations_all
        - value: none
          text: $t:fields.directus_settings.transformations_none
        - value: presets
          text: $t:fields.directus_settings.transformations_presets
    width: half

  - field: storage_default_folder
    interface: system-folder
    width: half
    note: $t:interfaces.system-folder.field_hint

  - field: storage_asset_presets
    interface: list
    options:
      fields:
        - field: key
          name: $t:key
          type: string
          schema:
            is_nullable: false
          meta:
            interface: input
            options:
              slug: true
              onlyOnCreate: false
            width: full
        - field: fit
          name: $t:field_options.directus_settings.storage_asset_presets.fit_label
          type: string
          schema:
            is_nullable: false
          meta:
            interface: select-dropdown
            options:
              choices:
                - value: contain
                  text: $t:field_options.directus_settings.storage_asset_presets.fit.contain_text
                - value: cover
                  text: $t:field_options.directus_settings.storage_asset_presets.fit.cover_text
                - value: inside
                  text: $t:field_options.directus_settings.storage_asset_presets.fit.fit_text
                - value: outside
                  text: $t:field_options.directus_settings.storage_asset_presets.fit.outside_text
            width: half
        - field: width
          name: $t:width
          type: integer
          schema:
            is_nullable: false
          meta:
            interface: input
            width: half
        - field: height
          name: $t:height
          type: integer
          schema:
            is_nullable: false
          meta:
            interface: input
            width: half
        - field: quality
          type: integer
          name: $t:quality
          schema:
            default_value: 80
            is_nullable: false
          meta:
            interface: slider
            options:
              max: 100
              min: 0
              step: 1
            width: half
        - field: withoutEnlargement
          name: $t:field_options.directus_settings.storage_asset_presets.upscaling
          type: boolean
          schema:
            default_value: false
          meta:
            interface: boolean
            width: half
            options:
              label: $t:no_upscale
        - field: format
          name: $t:format
          type: string
          schema:
            is_nullable: false
            default_value: ''
          meta:
            interface: select-dropdown
            options:
              allowNone: true
              choices:
                - value: jpeg
                  text: JPEG
                - value: png
                  text: PNG
                - value: webp
                  text: WebP
                - value: tiff
                  text: Tiff
            width: half
        - field: transforms
          name: $t:field_options.directus_settings.additional_transforms
          type: json
          schema:
            is_nullable: false
            default_value: []
          meta:
            note: $t:field_options.directus_settings.transforms_note

            interface: json
            options:
              template: >
                [
                  ["blur", 45],
                  ["grayscale"],
                  ["extend", { "right": 500, "background": "rgb(255, 0, 0)" }]
                ]
              placeholder: >
                [
                  ["blur", 45],
                  ["grayscale"],
                  ["extend", { "right": 500, "background": "rgb(255, 0, 0)" }]
                ]
            width: full
      template: '{{key}}'
    special: cast-json
    width: full

  - field: map_divider
    interface: presentation-divider
    options:
      icon: map
      title: $t:fields.directus_settings.mapping
    special:
      - alias
      - no-data
    width: full

  - field: mapbox_key
    interface: input
    options:
      icon: key
      title: $t:field_options.directus_settings.mapbox_key
      placeholder: $t:field_options.directus_settings.mapbox_placeholder
      iconLeft: vpn_key
      font: monospace
    width: full

  - field: basemaps
    interface: list
    special: cast-json
    options:
      template: '{{name}}'
      fields:
        - field: name
          name: $t:name
          schema:
            is_nullable: false
          meta:
            interface: text-input
            options:
              placeholder: $t:field_options.directus_settings.basemaps_name_placeholder
        - field: type
          name: $t:type
          meta:
            interface: select-dropdown
            options:
              choices:
                - value: raster
                  text: $t:field_options.directus_settings.basemaps_raster
                - value: tile
                  text: $t:field_options.directus_settings.basemaps_tile
                - value: style
                  text: $t:field_options.directus_settings.basemaps_style
        - field: url
          name: $t:url
          schema:
            is_nullable: false
          meta:
            interface: text-input
            options:
              placeholder: http://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png
        - field: tileSize
          name: $t:tile_size
          type: integer
          schema:
            is_nullable: true
          meta:
            interface: input
            options:
              placeholder: '512'
            conditions:
              - name: typeNeqRaster
                rule:
                  type:
                    _neq: 'raster'
                hidden: true
        - field: attribution
          name: $t:fields.directus_settings.attribution
          type: string
          schema:
            is_nullable: true
          meta:
            interface: input
            options:
              placeholder: $t:fields.directus_settings.attribution_placeholder

  - field: translation_strings
    special: cast-json
    hidden: true

  # Theme Overrides are part of settings, but are only edited in the themes endpoint.
  # We'll hide by default, then manually set hidden to false when we need it.
  - field: theme_overrides
    special: cast-json
    hidden: true
    options:
      fields:
        # ---------- Colors ----------
        - field: colors_divider
          meta:
            interface: presentation-divider
            options:
              title: $t:field_options.directus_settings.theme_overrides.sections.colors.title
              inlineTitle: true
            special:
              - alias
              - no-data
            width: full
        - field: colors_description
          meta:
            interface: presentation-text-block
            options:
              text: $t:field_options.directus_settings.theme_overrides.sections.colors.description
            special:
              - alias
              - no-data
            width: full
        # ---------- Primary Color Group ----------
        - field: colors_primary
          meta:
            width: half
            interface: theme-color-group
            special:
              - alias
              - no-data
              - group
        - field: global.color.primary.normal
          name: $t:field_options.directus_settings.theme_overrides.colors.primary_normal
          meta:
            interface: theme-color-picker
            group: colors_primary
            options:
              source: true
        - field: global.color.primary.accent
          name: $t:field_options.directus_settings.theme_overrides.colors.primary_accent
          meta:
            group: colors_primary
            options:
              generated: true
              mix: global.color.background.invert
              desiredContrast: 1.35
              endBuffer: .2
              baseBuffer: .2
        - field: global.color.primary.subtle
          name: $t:field_options.directus_settings.theme_overrides.colors.primary_subtle
          meta:
            group: colors_primary
            options:
              generated: true
              mix: global.color.background.page
              desiredContrast: 4.7
              endBuffer: .2
              baseBuffer: .2
        # ---------- Secondary Color Group ----------
        - field: colors_secondary
          meta:
            width: half
            interface: theme-color-group
            special:
              - alias
              - no-data
              - group
        - field: global.color.secondary.normal
          name: $t:field_options.directus_settings.theme_overrides.colors.secondary_normal
          meta:
            interface: theme-color-picker
            group: colors_secondary
            options:
              source: true
        - field: global.color.secondary.accent
          name: $t:field_options.directus_settings.theme_overrides.colors.secondary_accent
          meta:
            group: colors_secondary
            options:
              generated: true
              mix: global.color.background.invert
              desiredContrast: 1.35
              endBuffer: .2
              baseBuffer: .2
        - field: global.color.secondary.subtle
          name: $t:field_options.directus_settings.theme_overrides.colors.secondary_subtle
          meta:
            group: colors_secondary
            options:
              generated: true
              mix: global.color.background.page
              desiredContrast: 4.7
              endBuffer: .2
              baseBuffer: .2
        # ---------- Success Color Group ----------
        - field: colors_success
          meta:
            width: half
            interface: theme-color-group
            special:
              - alias
              - no-data
              - group
        - field: global.color.success.normal
          name: $t:field_options.directus_settings.theme_overrides.colors.success_normal
          meta:
            interface: theme-color-picker
            group: colors_success
            options:
              source: true
        - field: global.color.success.accent
          name: $t:field_options.directus_settings.theme_overrides.colors.success_accent
          meta:
            group: colors_success
            options:
              generated: true
              mix: global.color.background.invert
              desiredContrast: 1.35
              endBuffer: .2
              baseBuffer: .2
        - field: global.color.success.subtle
          name: $t:field_options.directus_settings.theme_overrides.colors.success_subtle
          meta:
            group: colors_success
            options:
              generated: true
              mix: global.color.background.page
              desiredContrast: 4.7
              endBuffer: .2
              baseBuffer: .2
        # ---------- Warning Color Group ----------
        - field: colors_warning
          meta:
            width: half
            interface: theme-color-group
            special:
              - alias
              - no-data
              - group
        - field: global.color.warning.normal
          name: $t:field_options.directus_settings.theme_overrides.colors.warning_normal
          meta:
            interface: theme-color-picker
            group: colors_warning
            options:
              source: true
        - field: global.color.warning.accent
          name: $t:field_options.directus_settings.theme_overrides.colors.warning_accent
          meta:
            group: colors_warning
            options:
              generated: true
              mix: global.color.background.invert
              desiredContrast: 1.35
              endBuffer: .2
              baseBuffer: .2
        - field: global.color.warning.subtle
          name: $t:field_options.directus_settings.theme_overrides.colors.warning_subtle
          meta:
            group: colors_warning
            options:
              generated: true
              mix: global.color.background.page
              desiredContrast: 4.7
              endBuffer: .15
              baseBuffer: .2
        # ---------- Danger Color Group ----------
        - field: colors_danger
          meta:
            width: half
            interface: theme-color-group
            special:
              - alias
              - no-data
              - group
        - field: global.color.danger.normal
          name: $t:field_options.directus_settings.theme_overrides.colors.danger_normal
          meta:
            interface: theme-color-picker
            group: colors_danger
            options:
              source: true
        - field: global.color.danger.accent
          name: $t:field_options.directus_settings.theme_overrides.colors.danger_accent
          meta:
            group: colors_danger
            options:
              generated: true
              mix: global.color.background.invert
              desiredContrast: 1.35
              endBuffer: .2
              baseBuffer: .2
        - field: global.color.danger.subtle
          name: $t:field_options.directus_settings.theme_overrides.colors.danger_subtle
          meta:
            group: colors_danger
            options:
              generated: true
              mix: global.color.background.page
              desiredContrast: 4.7
              endBuffer: .45
              baseBuffer: .2
        # ---------- Foreground ----------
        - field: foreground_divider
          meta:
            interface: presentation-divider
            options:
              title: $t:field_options.directus_settings.theme_overrides.sections.foreground.title
              inlineTitle: true
            special:
              - alias
              - no-data
            width: full
        - field: foreground_description
          meta:
            interface: presentation-text-block
            options:
              text: $t:field_options.directus_settings.theme_overrides.sections.foreground.description
            special:
              - alias
              - no-data
            width: full

        - field: global.font.family.sans
          name: $t:field_options.directus_settings.theme_overrides.font.sans
          type: string
          meta:
            interface: select-dropdown
            width: half
            options:
              choices:
                - text: Inter
                  value: Inter
                - text: Open Sans
                  value: Open Sans
                - text: Fira Sans
                  value: Fira Sans
                - text: Noto Sans
                  value: Noto Sans
                - text: Roboto
                  value: Roboto
                - text: Merriweather Sans
                  value: Merriweather Sans
              allowOther: true
        - field: global.font.family.serif
          name: $t:field_options.directus_settings.theme_overrides.font.serif
          type: string
          meta:
            interface: select-dropdown
            width: half
            options:
              choices:
                - text: Merriweather
                  value: Merriweather
                - text: Playfair Display
                  value: Playfair Display
                - text: Noto Serif
                  value: Noto Serif
                - text: Source Serif Pro
                  value: Source Serif Pro
                - text: Roboto Serif
                  value: Roboto Serif
                - text: Roboto Slab
                  value: Roboto Slab
              allowOther: true
        - field: global.font.family.mono
          name: $t:field_options.directus_settings.theme_overrides.font.mono
          type: string
          meta:
            interface: select-dropdown
            width: half
            options:
              choices:
                - text: Fira Mono
                  value: Fira Mono
                - text: Fira Code
                  value: Fira Code
                - text: Source Code Pro
                  value: Source Code Pro
                - text: Roboto Mono
                  value: Roboto Mono
                - text: JetBrains Mono
                  value: JetBrains Mono
                - text: Noto Sans Mono
                  value: Noto Sans Mono
              allowOther: true
        - field: global.color.foreground.normal
          name: $t:field_options.directus_settings.theme_overrides.colors.foreground_normal
          meta:
            width: half
            interface: theme-color-picker
        - field: global.color.foreground.accent
          name: $t:field_options.directus_settings.theme_overrides.colors.foreground_accent
          meta:
            width: half
            interface: theme-color-picker
        - field: global.color.foreground.subtle
          name: $t:field_options.directus_settings.theme_overrides.colors.foreground_subtle
          meta:
            width: half
            interface: theme-color-picker
        - field: global.color.foreground.invert
          name: $t:field_options.directus_settings.theme_overrides.colors.foreground_invert
          meta:
            width: half
            interface: theme-color-picker
        # ---------- Background ----------
        - field: background_divider
          meta:
            interface: presentation-divider
            options:
              title: $t:field_options.directus_settings.theme_overrides.sections.background.title
              inlineTitle: true
            special:
              - alias
              - no-data
            width: full
        - field: background_description
          meta:
            interface: presentation-text-block
            options:
              text: $t:field_options.directus_settings.theme_overrides.sections.background.description
            special:
              - alias
              - no-data
            width: full

        - field: global.color.background.normal
          name: $t:field_options.directus_settings.theme_overrides.colors.background_normal
          meta:
            width: half
            interface: theme-color-picker
        - field: global.color.background.accent
          name: $t:field_options.directus_settings.theme_overrides.colors.background_accent
          meta:
            width: half
            interface: theme-color-picker
        - field: global.color.background.subtle
          name: $t:field_options.directus_settings.theme_overrides.colors.background_subtle
          meta:
            width: half
            interface: theme-color-picker
        - field: global.color.background.page
          name: $t:field_options.directus_settings.theme_overrides.colors.background_page
          meta:
            width: half
            interface: theme-color-picker
        - field: global.color.background.invert
          name: $t:field_options.directus_settings.theme_overrides.colors.background_invert
          meta:
            width: half
            interface: theme-color-picker
        # ---------- Border ----------
        - field: border_divider
          meta:
            interface: presentation-divider
            options:
              title: $t:field_options.directus_settings.theme_overrides.sections.border.title
              inlineTitle: true
            special:
              - alias
              - no-data
            width: full
        - field: border_description
          meta:
            interface: presentation-text-block
            options:
              text: $t:field_options.directus_settings.theme_overrides.sections.border.description
            special:
              - alias
              - no-data
            width: full

        - field: global.border.width
          name: $t:field_options.directus_settings.theme_overrides.border.width
          type: string
          meta:
            width: half
            interface: input
        - field: global.border.radius
          name: $t:field_options.directus_settings.theme_overrides.border.radius
          type: string
          meta:
            width: half
            interface: input
        - field: global.color.border.normal
          name: $t:field_options.directus_settings.theme_overrides.colors.border_normal
          meta:
            width: half
            interface: theme-color-picker
        - field: global.color.border.accent
          name: $t:field_options.directus_settings.theme_overrides.colors.border_accent
          meta:
            width: half
            interface: theme-color-picker
        - field: global.color.border.subtle
          name: $t:field_options.directus_settings.theme_overrides.colors.border_subtle
          meta:
            width: half
            interface: theme-color-picker
